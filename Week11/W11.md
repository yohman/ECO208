---
marp: true
theme: uncover
headingDivider: 3
# footer: Introduction to Econometrics B | å…¥é–€è¨ˆé‡çµŒæ¸ˆå­¦B ![width:30px](../images/yoh%20with%20globe.png)
paginate: true

---


# ECO208 

#### R and RStudio

Week 11 | December 9, 2022

## Happy Friday class!ğŸ¥³

Please take this class survey. 
We will use it as data for our class today.

![width:500](../images/w11%20survey.png)

##
![Alt text](../images/wc%20pks%20made.jpeg)
##
![Alt text](../images/wc%20pks%20missed.jpeg)

##
![Alt text](../images/wc%20pks%20by%20area.jpeg)
##
![Alt text](../images/wc%20pks%20placement.jpeg)


## Last week...


##

ä»Šæ—¥ã¯ä¸€ç·’ã«RStudioã§ã‚¼ãƒ­ã‹ã‚‰
é‡å›å¸°åˆ†æã‚’ã‚„ã‚Šã¾ã—ã‚‡ã†


### Part 1: Download data

- ã‚ã‹ã‚Šã‚„ã™ã„ã¨ã“ã‚ã«`Week11`ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ã‚’ä½œã‚‹ï¼ˆãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã¨ã‹ï¼‰
- ã‚¯ãƒ©ã‚¹ã‚µã‚¤ãƒˆã‹ã‚‰`class.csv`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’`Week11`ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰


### Part 2: R Setup

- Rã‚’ç«‹ã¡ä¸Šã’ã‚‹
- Working directoryã‚’`Week11`ã«ã‚»ãƒƒãƒˆã™ã‚‹

![width:600](../images/r%20set%20working%20directory.png)

##

ã“ã†ãªã‚‹ã¯ãšï¼š

![width:800](../images/w11%20r%20start.png)

##

æ–°ã—ã„R Scriptãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã‚‹

![width:800](../images/w11%20r%20new%20script.png)

### Part 3: Get the data into R


```r
# import data
class <- read.csv("class.csv")
```

##

ãƒ‡ãƒ¼ã‚¿ã®ç¢ºèª
```r
summary(class)
str(class)
```

- ã“ã“ã§æ•°çš„ï¼ˆint,float)ã§ã¯ãªã„å€¤ï¼ˆchrãªã©ï¼‰ã«æ³¨æ„
- å ´åˆã«ã‚ˆã£ã¦ã¯çµ±è¨ˆçš„ã«é–¢ä¿‚ã®ãªã„ã‚«ãƒ©ãƒ ã‚’å‰Šé™¤ã—ã¦ã‹ã‚‰ã‚‚ã†ä¸€åº¦èª­ã¿è¾¼ã‚€

##
ã“ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«ãƒ‡ãƒ¼ã‚¿ã‚’attachã™ã‚‹

```r
attach(class)
```

### Part 4: Initial data inspection
plotã§ãƒ‡ãƒ¼ã‚¿ã‚’inspectã™ã‚‹

```r
plot(class)
```
##

ãƒ‡ãƒ¼ã‚¿ã®ã‚«ãƒ©ãƒ ãŒå¤šã‘ã‚Œã°ã“ã®ã‚ˆã†ã«subsetã™ã‚‹
```r
class[c("koma","study","happiness")]
```

plotã«ã‚‚ä½¿ãˆã‚‹
```r
plot(class[c("koma","study","happiness")])
```

å¤‰æ•°ã«ã—ã¦ã‹ã‚‰plotã«å…¥ã‚Œã‚‹ã®ã‚‚ã‚ã‚Š

```r
class_mini <- class[c("koma","study","happiness")])
plot(class_mini)
```

##
```ggpairs()```

å¤‰æ•°é–“ã®é–¢ä¿‚ã‚’ï¼‘ã¤ã®å›³ã§å¯è¦–åŒ–ã™ã‚‹ã‚¹ãƒ¼ãƒ‘ãƒ¼é–¢æ•°

![width:600](../images/ggpairs%20sample.png)
##
ggpairsã‚’ä½¿ã†ã«ã¯GGallyãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒå¿…è¦

```r
install.packages("GGally")
```
ä½¿ã†ã¨ãã¯libraryã‚’å–ã‚Šè¾¼ã‚€
```r
library(GGally)
```

##

```r
ggpairs(class)
```

ã‚«ãƒ©ãƒ ãŒå¤šã‘ã‚Œã°é¸ã¹ã°ã„ã„ï¼š
```r
ggpairs(class, columns = c("study","work","happiness","grade"))
```

##
![width:600](../images/ggpairs%20output.png)
è‰²ã€…è©¦ã—ã¦ã€èª¬æ˜å¤‰æ•°ã€ç›®çš„å¤‰æ•°ã‚’æ±ºã‚ã‚‹

### Part 5: ã§ã¯ãƒ¢ãƒ‡ãƒ«ã‚’ä½œã‚ã†

##

ä¸€ã¤ã®æ‰‹æ®µã¨ã—ã¦ã¯ã¨ã‚Šã‚ãˆãšå…¨éƒ¨å…¥ã‚Œã¦ã¿ã‚‹

```r
model <- lm(happiness ~ .,class)

summary(model)
```

### Part 6: å¤‰æ•°é¸æŠ

ã§ã¯ã©ã®å¤‰æ•°ã‚’ä½¿ãˆã°ã€æœ€ã‚‚è‰¯ã„ãƒ¢ãƒ‡ãƒ«ãŒä½œã‚Œã‚‹ï¼Ÿ

##

![width:600](../images/lm%20output.png)

På€¤ãŒä¸€ç•ªé«˜ã„å¤‰æ•°ã‚’ä¸€ã¤ãšã¤æ¶ˆã—ã¦ã„ãã¨ã„ã„ã‹ã‚‚ã€‚ğŸ¤”

##

ãƒ¢ãƒ‡ãƒ«ã‚’ä½œã‚Šç›´ã™

```r
model <- lm(happiness ~ work + study + hobby + exercise , class)

summary(model)
```
è‰²ã‚“ãªçµ„ã¿åˆã‚ã›ã§æœ€é©ãªçµæœãŒå‡ºã‚‹ã¾ã§ç¹°ã‚Šè¿”ã™ï¼ğŸ¤“

### In a nutshell... (æ‰‹çŸ­ã«)
![width:800](../images/summary%20interpretation.png)

é‡å›å¸°åˆ†æã¯Adjusted R-Squaredã‚’ä½¿ã†ã‚ˆã†ã«ï¼ğŸ‘ˆ

##

å¤‰æ•°ã‚’è‡ªå‹•çš„ã«é¸æŠã§ãã‚‹æ–¹æ³•ã‚‚ã‚ã‚‹ğŸ˜²

```r
step(model)
```
ã“ã®ä¸­ã§ä¸€ç•ªAICãŒä½ã„ãƒ¢ãƒ‡ãƒ«ã‚’é¸ã¶